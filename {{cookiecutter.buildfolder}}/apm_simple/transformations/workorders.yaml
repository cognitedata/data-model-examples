externalId: tutorial-load-workorders
name: tutorial-load-Workorders
query: >-
  /* MAPPING_MODE_ENABLED: true */
  /* {"version":1,"sourceType":"raw","mappings":[
  {"from":"externalId","to":"externalId","asType":"STRING"},
  {"from":"isCompleted","to":"isCompleted","asType":"BOOLEAN"},
  {"from":"plannedStart","to":"plannedStart","asType":"TIMESTAMP"},
  {"from":"isSafetyCritical","to":"isSafetyCritical","asType":"BOOLEAN"},
  {"from":"workPackageNumber","to":"workPackageNumber","asType":"STRING"},
  {"from":"endTime","to":"endTime","asType":"TIMESTAMP"},
  {"from":"status","to":"status","asType":"STRING"},
  {"from":"durationHours","to":"durationHours","asType":"INT"},
  {"from":"workOrderNumber","to":"workOrderNumber","asType":"STRING"},
  {"from":"title","to":"title","asType":"STRING"},
  {"from":"percentageProgress","to":"percentageProgress","asType":"INT"},
  {"from":"startTime","to":"startTime","asType":"TIMESTAMP"},
  {"from":"actualHours","to":"actualHours","asType":"INT"},
  {"from":"description","to":"description","asType":"STRING"},
  {"from":"isCancelled","to":"isCancelled","asType":"BOOLEAN"},
  {"from":"isActive","to":"isActive","asType":"BOOLEAN"},
  {"from":"priorityDescription","to":"priorityDescription","asType":"STRING"},
  {"from":"dueDate","to":"dueDate","asType":"TIMESTAMP"},
  {"from":"createdDate","to":"createdDate","asType":"TIMESTAMP"},
  {"from":"programNumber","to":"programNumber","asType":"STRING"}],
  "sourceLevel1":"{{cookiecutter.apm_simple_raw_db}}","sourceLevel2":"workorders"} */
  select
  cast(`externalId` as STRING) as externalId,
  cast(`isCompleted` as BOOLEAN) as isCompleted,
  cast(`plannedStart` as TIMESTAMP) as plannedStart,
  cast(`isSafetyCritical` as BOOLEAN) as isSafetyCritical,
  cast(`workPackageNumber` as STRING) as workPackageNumber,
  cast(`endTime` as TIMESTAMP) as endTime,
  cast(`status` as STRING) as status,
  cast(`durationHours` as INT) as durationHours,
  cast(`workOrderNumber` as STRING) as workOrderNumber,
  cast(`title` as STRING) as title,
  cast(`percentageProgress` as INT) as percentageProgress,
  cast(`startTime` as TIMESTAMP) as startTime,
  cast(`actualHours` as INT) as actualHours,
  cast(`description` as STRING) as description,
  cast(`isCancelled` as BOOLEAN) as isCancelled,
  cast(`isActive` as BOOLEAN) as isActive,
  cast(`priorityDescription` as STRING) as priorityDescription,
  cast(`dueDate` as TIMESTAMP) as dueDate,
  cast(`createdDate` as TIMESTAMP) as createdDate,
  cast(`programNumber` as STRING) as programNumber
  from
  `{{cookiecutter.apm_simple_raw_db}}`.`workorders`;
destination:
  dataModel:
    space: {{cookiecutter.apm_simple_space}}
    externalId: {{cookiecutter.apm_simple_datamodel}}
    version: "1"
    destinationType: Workorder
  instanceSpace: {{cookiecutter.apm_simple_space}}
  type: instances
ignoreNullFields: true
shared: true
action: upsert
# Specify credentials separately like this:
# You can also use different credentials for the running transformations than the ones you use to deploy
authentication:
  clientId: ${TRANSFORMATIONS_CLIENT_ID}
  clientSecret: ${TRANSFORMATIONS_CLIENT_SECRET}
  tokenUrl: ${TRANSFORMATIONS_TOKEN_URL}
  # Optional: If idP requires providing the scopes
  cdfProjectName: ${TRANSFORMATIONS_PROJECT}
  scopes:
    - ${TRANSFORMATIONS_SCOPES}
  # Optional: If idP requires providing the audience
  audience: ${TRANSFORMATIONS_AUDIENCE}
